<!-- Premium Vendor Products Component -->
<div class="products-container">
  <!-- Loading Overlay -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner">
      <div class="spinner-ring"></div>
      <span>Loading Products...</span>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="loadError && !isLoading">
    <div class="error-content">
      <svg viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="#ef4444" stroke-width="1.5">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <h2>{{ loadError }}</h2>
      <p>We couldn't load your products. Please check your connection and try again.</p>
      <div class="error-actions">
        <button class="btn-primary" (click)="loadProducts()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
            <polyline points="23,4 23,10 17,10"></polyline>
            <polyline points="1,20 1,14 7,14"></polyline>
            <path d="M3.51,9a9,9,0,0,1,14.85-3.36L23,10M1,14l4.64,4.36A9,9,0,0,0,20.49,15"></path>
          </svg>
          Retry
        </button>
        <button class="btn-secondary" routerLink="/vendor-dashboard">
          Back to Dashboard
        </button>
      </div>
    </div>
  </div>

  <!-- Premium Header Section -->
  <header class="page-header">
    <div class="header-content">
      <div class="header-left">
        <div class="breadcrumb">
          <a routerLink="/vendor-dashboard">Dashboard</a>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="9,18 15,12 9,6"/></svg>
          <span>Products</span>
        </div>
        <h1 class="page-title">
          <span class="title-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
              <line x1="7" y1="7" x2="7.01" y2="7"/>
            </svg>
          </span>
          Product Inventory
        </h1>
        <p class="page-subtitle">Manage and optimize your product catalog</p>
      </div>
      <div class="header-right">
        <button class="btn-export" (click)="exportToCSV()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Export
        </button>
        <button class="btn-primary" (click)="addNewProduct()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          Add Product
        </button>
      </div>
    </div>
  </header>

  <!-- Quick Stats Cards -->
  <section class="stats-section">
    <div class="stats-grid">
      <div class="stat-card total">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
            <line x1="3" y1="6" x2="21" y2="6"/>
            <path d="M16 10a4 4 0 0 1-8 0"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats.totalProducts }}</span>
          <span class="stat-label">Total Products</span>
        </div>
        <div class="stat-trend up">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/></svg>
          <span>+12%</span>
        </div>
      </div>

      <div class="stat-card value">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="12" y1="1" x2="12" y2="23"/>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ formatPrice(stats.totalValue) }}</span>
          <span class="stat-label">Inventory Value</span>
        </div>
        <div class="stat-trend up">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/></svg>
          <span>+8%</span>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats.lowStock }}</span>
          <span class="stat-label">Low Stock</span>
        </div>
        <div class="stat-badge">Needs Attention</div>
      </div>

      <div class="stat-card danger">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats.outOfStock }}</span>
          <span class="stat-label">Out of Stock</span>
        </div>
        <div class="stat-badge urgent">Urgent</div>
      </div>

      <div class="stat-card promo">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats.promotionsActive }}</span>
          <span class="stat-label">Active Promotions</span>
        </div>
        <div class="stat-trend up">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/></svg>
          <span>+3</span>
        </div>
      </div>

      <div class="stat-card rating">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats.avgRating.toFixed(1) }}</span>
          <span class="stat-label">Avg. Rating</span>
        </div>
        <div class="rating-stars">
          <svg *ngFor="let i of [1,2,3,4,5]" viewBox="0 0 24 24" [class.filled]="i <= stats.avgRating">
            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
          </svg>
        </div>
      </div>
    </div>
  </section>

  <!-- Toolbar Section -->
  <section class="toolbar-section">
    <div class="toolbar-left">
      <!-- View Mode Toggle -->
      <div class="view-toggle">
        <button [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')" title="Grid View">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
          </svg>
        </button>
        <button [class.active]="viewMode === 'list'" (click)="setViewMode('list')" title="List View">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="8" y1="6" x2="21" y2="6"/>
            <line x1="8" y1="12" x2="21" y2="12"/>
            <line x1="8" y1="18" x2="21" y2="18"/>
            <line x1="3" y1="6" x2="3.01" y2="6"/>
            <line x1="3" y1="12" x2="3.01" y2="12"/>
            <line x1="3" y1="18" x2="3.01" y2="18"/>
          </svg>
        </button>
        <button [class.active]="viewMode === 'table'" (click)="setViewMode('table')" title="Table View">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
            <path d="M3 9h18"/>
            <path d="M3 15h18"/>
            <path d="M9 3v18"/>
          </svg>
        </button>
      </div>

      <!-- Filter Toggle -->
      <button class="btn-filter" [class.active]="showFilters" (click)="toggleFilters()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polygon points="22,3 2,3 10,12.46 10,19 14,21 14,12.46 22,3"/>
        </svg>
        Filters
        <span class="filter-badge" *ngIf="hasActiveFilters()">Active</span>
      </button>
    </div>

    <div class="toolbar-center">
      <!-- Search -->
      <div class="search-box">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
        <input type="text" 
               placeholder="Search products by name, description..." 
               [(ngModel)]="searchQuery"
               (input)="onSearchChange($event)">
        <button class="clear-search" *ngIf="searchQuery" (click)="searchQuery = ''; applyFilters()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="toolbar-right">
      <!-- Sort Dropdown -->
      <div class="sort-dropdown">
        <label>Sort by:</label>
        <select [(ngModel)]="selectedSort" (change)="onFilterChange()">
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
          <option value="price-high">Price: High to Low</option>
          <option value="price-low">Price: Low to High</option>
          <option value="name-az">Name: A-Z</option>
          <option value="name-za">Name: Z-A</option>
          <option value="best-selling">Best Selling</option>
          <option value="rating">Highest Rated</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Filters Panel -->
  <section class="filters-panel" *ngIf="showFilters">
    <div class="filters-grid">
      <div class="filter-group">
        <label>Category</label>
        <select [(ngModel)]="selectedCategory" (change)="onFilterChange()">
          <option value="">All Categories</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Stock Status</label>
        <select [(ngModel)]="selectedStatus" (change)="onFilterChange()">
          <option value="">All Status</option>
          <option value="In Stock">In Stock</option>
          <option value="Low Stock">Low Stock</option>
          <option value="Out of Stock">Out of Stock</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Promotion</label>
        <select [(ngModel)]="selectedPromotion" (change)="onFilterChange()">
          <option value="">All Promotions</option>
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>
      </div>

      <div class="filter-actions">
        <button class="btn-clear" (click)="clearFilters()" *ngIf="hasActiveFilters()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
          Clear All
        </button>
      </div>
    </div>
  </section>

  <!-- Bulk Actions Bar -->
  <section class="bulk-actions-bar" *ngIf="showBulkActions">
    <div class="bulk-info">
      <span class="selected-count">{{ selectedCount }}</span>
      <span>products selected</span>
    </div>
    <div class="bulk-buttons">
      <button class="bulk-btn" (click)="bulkAction('enable-promo')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
        </svg>
        Enable Promo
      </button>
      <button class="bulk-btn" (click)="bulkAction('disable-promo')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10"/>
          <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
        </svg>
        Disable Promo
      </button>
      <button class="bulk-btn" (click)="bulkAction('export')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7,10 12,15 17,10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Export Selected
      </button>
      <button class="bulk-btn danger" (click)="bulkAction('delete')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="3,6 5,6 21,6"/>
          <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
        </svg>
        Delete
      </button>
      <button class="bulk-btn cancel" (click)="clearSelection()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
        Cancel
      </button>
    </div>
  </section>

  <!-- Results Summary -->
  <div class="results-summary">
    <span>Showing {{ filteredProducts.length }} of {{ products.length }} products</span>
  </div>

  <!-- GRID VIEW -->
  <section class="products-section" *ngIf="viewMode === 'grid'">
    <div class="products-grid">
      <div class="product-card" 
           *ngFor="let product of getPaginatedProducts()"
           [class.selected]="product.selected"
           [class.out-of-stock]="(product.stockLevel || 0) === 0">
        
        <!-- Selection Checkbox -->
        <div class="card-select">
          <input type="checkbox" 
                 [checked]="product.selected" 
                 (change)="toggleProductSelection(product)"
                 [id]="'select-' + product.productId">
          <label [for]="'select-' + product.productId"></label>
        </div>

        <!-- Badges -->
        <div class="card-badges">
          <span class="badge discount" *ngIf="product.discount && product.discount > 0">
            -{{ product.discount }}%
          </span>
          <span class="badge promo" *ngIf="product.promotionEnabled">
            <svg viewBox="0 0 24 24" fill="currentColor"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/></svg>
            Promo
          </span>
          <span class="badge stock" [ngClass]="getStockStatus(product).class">
            {{ getStockStatus(product).label }}
          </span>
        </div>

        <!-- Product Image -->
        <div class="card-image">
          <img [src]="product.productSingleImage" [alt]="product.productName" loading="lazy">
          <div class="image-overlay">
            <button class="overlay-btn" (click)="previewProduct(product)" title="Preview">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </button>
            <button class="overlay-btn" (click)="editProduct(product)" title="Edit">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
            <button class="overlay-btn" (click)="duplicateProduct(product)" title="Duplicate">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Card Content -->
        <div class="card-content">
          <span class="card-category">{{ product.category }}</span>
          <h3 class="card-title">{{ product.productName }}</h3>
          <p class="card-description">{{ product.productDescription }}</p>

          <!-- Price Section -->
          <div class="card-pricing">
            <div class="price-main">
              <span class="price-current">{{ formatPrice(getDiscountedPrice(product)) }}</span>
              <span class="price-original" *ngIf="product.discount && product.discount > 0">
                {{ formatPrice(product.price || 0) }}
              </span>
            </div>
          </div>

          <!-- Product Stats -->
          <div class="card-stats">
            <div class="stat-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="1" y="3" width="15" height="13"/>
                <polygon points="16,8 20,8 23,11 23,16 16,16 16,8"/>
                <circle cx="5.5" cy="18.5" r="2.5"/>
                <circle cx="18.5" cy="18.5" r="2.5"/>
              </svg>
              <span>{{ product.salesCount || 0 }} sold</span>
            </div>
            <div class="stat-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <span>{{ formatNumber(product.viewCount || 0) }} views</span>
            </div>
            <div class="stat-item rating">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
              </svg>
              <span>{{ product.rating || 0 }}</span>
            </div>
          </div>

          <!-- Stock Bar -->
          <div class="stock-indicator">
            <div class="stock-bar">
              <div class="stock-fill" 
                   [style.width.%]="getStockPercentage(product)"
                   [ngClass]="getStockStatus(product).class"></div>
            </div>
            <span class="stock-text">{{ product.stockLevel || 0 }} units</span>
          </div>

          <!-- Promotion Toggle -->
          <div class="promo-toggle">
            <span>Promotion</span>
            <label class="toggle-switch">
              <input type="checkbox" 
                     [checked]="product.promotionEnabled" 
                     (change)="togglePromotion(product)">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <!-- Card Actions -->
        <div class="card-actions">
          <button class="action-btn edit" (click)="editProduct(product)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
            Edit
          </button>
          <button class="action-btn delete" (click)="deleteProduct(product)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="3,6 5,6 21,6"/>
              <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
            </svg>
            Delete
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- LIST VIEW -->
  <section class="products-section" *ngIf="viewMode === 'list'">
    <div class="products-list">
      <div class="list-item" 
           *ngFor="let product of getPaginatedProducts()"
           [class.selected]="product.selected"
           [class.out-of-stock]="(product.stockLevel || 0) === 0">
        
        <div class="list-select">
          <input type="checkbox" 
                 [checked]="product.selected" 
                 (change)="toggleProductSelection(product)">
        </div>

        <div class="list-image">
          <img [src]="product.productSingleImage" [alt]="product.productName">
          <span class="badge discount" *ngIf="product.discount && product.discount > 0">
            -{{ product.discount }}%
          </span>
        </div>

        <div class="list-info">
          <div class="list-header">
            <span class="list-category">{{ product.category }}</span>
            <span class="badge stock" [ngClass]="getStockStatus(product).class">
              {{ getStockStatus(product).label }}
            </span>
            <span class="badge promo" *ngIf="product.promotionEnabled">Promo Active</span>
          </div>
          <h3 class="list-title">{{ product.productName }}</h3>
          <p class="list-description">{{ product.productDescription }}</p>
        </div>

        <div class="list-metrics">
          <div class="metric">
            <span class="metric-value">{{ product.salesCount || 0 }}</span>
            <span class="metric-label">Sales</span>
          </div>
          <div class="metric">
            <span class="metric-value">{{ formatNumber(product.viewCount || 0) }}</span>
            <span class="metric-label">Views</span>
          </div>
          <div class="metric">
            <span class="metric-value">{{ product.stockLevel || 0 }}</span>
            <span class="metric-label">Stock</span>
          </div>
          <div class="metric rating">
            <span class="metric-value">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
              </svg>
              {{ product.rating || 0 }}
            </span>
            <span class="metric-label">Rating</span>
          </div>
        </div>

        <div class="list-price">
          <span class="price-current">{{ formatPrice(getDiscountedPrice(product)) }}</span>
          <span class="price-original" *ngIf="product.discount && product.discount > 0">
            {{ formatPrice(product.price || 0) }}
          </span>
        </div>

        <div class="list-actions">
          <button class="icon-btn" (click)="previewProduct(product)" title="Preview">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="icon-btn" (click)="editProduct(product)" title="Edit">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
          </button>
          <button class="icon-btn" (click)="duplicateProduct(product)" title="Duplicate">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
          </button>
          <button class="icon-btn danger" (click)="deleteProduct(product)" title="Delete">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="3,6 5,6 21,6"/>
              <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- TABLE VIEW -->
  <section class="products-section" *ngIf="viewMode === 'table'">
    <div class="table-container">
      <table class="products-table">
        <thead>
          <tr>
            <th class="col-select">
              <input type="checkbox" 
                     [checked]="selectAll" 
                     (change)="toggleSelectAll()">
            </th>
            <th class="col-product">Product</th>
            <th class="col-category">Category</th>
            <th class="col-price">Price</th>
            <th class="col-stock">Stock</th>
            <th class="col-sales">Sales</th>
            <th class="col-rating">Rating</th>
            <th class="col-promo">Promo</th>
            <th class="col-actions">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of getPaginatedProducts()"
              [class.selected]="product.selected"
              [class.out-of-stock]="(product.stockLevel || 0) === 0">
            <td class="col-select">
              <input type="checkbox" 
                     [checked]="product.selected" 
                     (change)="toggleProductSelection(product)">
            </td>
            <td class="col-product">
              <div class="product-cell">
                <img [src]="product.productSingleImage" [alt]="product.productName">
                <div class="product-info">
                  <span class="product-name">{{ product.productName }}</span>
                  <span class="product-id">ID: {{ product.productId }}</span>
                </div>
              </div>
            </td>
            <td class="col-category">
              <span class="category-badge">{{ product.category }}</span>
            </td>
            <td class="col-price">
              <div class="price-cell">
                <span class="price-current">{{ formatPrice(getDiscountedPrice(product)) }}</span>
                <span class="discount-badge" *ngIf="product.discount && product.discount > 0">
                  -{{ product.discount }}%
                </span>
              </div>
            </td>
            <td class="col-stock">
              <div class="stock-cell">
                <span class="stock-value">{{ product.stockLevel || 0 }}</span>
                <span class="stock-badge" [ngClass]="getStockStatus(product).class">
                  {{ getStockStatus(product).label }}
                </span>
              </div>
            </td>
            <td class="col-sales">{{ product.salesCount || 0 }}</td>
            <td class="col-rating">
              <div class="rating-cell">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"/>
                </svg>
                <span>{{ product.rating || 0 }}</span>
              </div>
            </td>
            <td class="col-promo">
              <label class="toggle-switch small">
                <input type="checkbox" 
                       [checked]="product.promotionEnabled" 
                       (change)="togglePromotion(product)">
                <span class="toggle-slider"></span>
              </label>
            </td>
            <td class="col-actions">
              <div class="table-actions">
                <button class="table-btn" (click)="editProduct(product)" title="Edit">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
                <button class="table-btn" (click)="duplicateProduct(product)" title="Duplicate">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                </button>
                <button class="table-btn danger" (click)="deleteProduct(product)" title="Delete">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polyline points="3,6 5,6 21,6"/>
                    <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Empty State -->
  <section class="empty-state" *ngIf="filteredProducts.length === 0 && !isLoading">
    <div class="empty-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <path d="M16 10a4 4 0 0 1-8 0"/>
      </svg>
    </div>
    <h3>No Products Found</h3>
    <p *ngIf="hasActiveFilters()">Try adjusting your filters or search query</p>
    <p *ngIf="!hasActiveFilters()">Start by adding your first product to the inventory</p>
    <div class="empty-actions">
      <button class="btn-secondary" *ngIf="hasActiveFilters()" (click)="clearFilters()">
        Clear Filters
      </button>
      <button class="btn-primary" (click)="addNewProduct()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        Add New Product
      </button>
    </div>
  </section>

  <!-- Pagination -->
  <section class="pagination-section" *ngIf="filteredProducts.length > 0">
    <div class="pagination-info">
      Showing {{ (currentPage - 1) * itemsPerPage + 1 }}-{{ Math.min(currentPage * itemsPerPage, filteredProducts.length) }} 
      of {{ filteredProducts.length }} products
    </div>
    <div class="pagination-controls">
      <button class="pagination-btn" 
              [disabled]="currentPage === 1" 
              (click)="previousPage()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="15,18 9,12 15,6"/>
        </svg>
        Previous
      </button>
      <div class="pagination-pages">
        <button class="page-btn" 
                *ngFor="let page of getPageNumbers()" 
                [class.active]="page === currentPage"
                (click)="goToPage(page)">
          {{ page }}
        </button>
      </div>
      <button class="pagination-btn" 
              [disabled]="currentPage === totalPages" 
              (click)="nextPage()">
        Next
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <polyline points="9,18 15,12 9,6"/>
        </svg>
      </button>
    </div>
  </section>
</div>
