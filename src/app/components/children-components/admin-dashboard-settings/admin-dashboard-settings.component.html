<div class="settings-container">
  <!-- Header Section -->
  <div class="settings-header">
    <div class="header-content">
      <div class="title-section">
        <i class="fas fa-cogs header-icon"></i>
        <div>
          <h1 class="settings-title">System Settings</h1>
          <p class="settings-subtitle">Manage admin preferences, platform configurations, and global options.</p>
        </div>
      </div>
      <button class="save-btn" (click)="saveAllSettings()" [disabled]="saving">
        <i class="fas fa-save" *ngIf="!saving"></i>
        <i class="fas fa-spinner fa-spin" *ngIf="saving"></i>
        {{ saving ? 'Saving...' : 'Save All Changes' }}
      </button>
    </div>
  </div>

  <!-- Settings Tabs -->
  <div class="settings-tabs">
    <div class="tabs-container">
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'general'"
        (click)="setActiveTab('general')">
        <i class="fas fa-cog"></i>
        General
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'security'"
        (click)="setActiveTab('security')">
        <i class="fas fa-shield-alt"></i>
        Security
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'profile'"
        (click)="setActiveTab('profile')">
        <i class="fas fa-user"></i>
        Profile
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'email'"
        (click)="setActiveTab('email')">
        <i class="fas fa-envelope"></i>
        Email
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'notifications'"
        (click)="setActiveTab('notifications')">
        <i class="fas fa-bell"></i>
        Notifications
      </button>
      <button 
        class="tab-btn" 
        [class.active]="activeTab === 'maintenance'"
        (click)="setActiveTab('maintenance')">
        <i class="fas fa-tools"></i>
        Maintenance
      </button>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    
    <!-- General Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'general'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-globe"></i>
          General Settings
        </h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Platform Name</label>
            <input type="text" class="form-input" [(ngModel)]="settings.general.platformName" placeholder="Enter platform name">
          </div>

          <div class="form-group">
            <label class="form-label">Primary Email</label>
            <input type="email" class="form-input" [(ngModel)]="settings.general.primaryEmail" placeholder="admin@yourplatform.com">
          </div>

          <div class="form-group">
            <label class="form-label">Support Contact</label>
            <input type="email" class="form-input" [(ngModel)]="settings.general.supportEmail" placeholder="support@yourplatform.com">
          </div>

          <div class="form-group">
            <label class="form-label">Time Zone</label>
            <select class="form-select" [(ngModel)]="settings.general.timezone">
              <option value="UTC">UTC</option>
              <option value="America/New_York">Eastern Time</option>
              <option value="America/Chicago">Central Time</option>
              <option value="America/Denver">Mountain Time</option>
              <option value="America/Los_Angeles">Pacific Time</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Language</label>
            <select class="form-select" [(ngModel)]="settings.general.language">
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Accent Color</label>
            <div class="color-picker-container">
              <input type="color" class="color-input" [(ngModel)]="settings.general.accentColor">
              <span class="color-preview" [style.background-color]="settings.general.accentColor"></span>
            </div>
          </div>

          <div class="form-group full-width">
            <label class="form-label">Platform Logo</label>
            <div class="file-upload-area" (click)="logoFileInput.click()">
              <input #logoFileInput type="file" hidden accept="image/*" (change)="onLogoUpload($event)">
              <div class="upload-content">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Click to upload logo</p>
              </div>
              <div class="logo-preview" *ngIf="settings.general.logoUrl">
                <img [src]="settings.general.logoUrl" alt="Logo Preview">
              </div>
            </div>
          </div>

          <div class="form-group full-width">
            <label class="form-label">Favicon</label>
            <div class="file-upload-area" (click)="faviconFileInput.click()">
              <input #faviconFileInput type="file" hidden accept="image/*" (change)="onFaviconUpload($event)">
              <div class="upload-content">
                <i class="fas fa-image"></i>
                <p>Click to upload favicon</p>
              </div>
              <div class="favicon-preview" *ngIf="settings.general.faviconUrl">
                <img [src]="settings.general.faviconUrl" alt="Favicon Preview">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Security Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'security'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-shield-alt"></i>
          Security & Authentication
        </h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Two-Factor Authentication</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.security.twoFactorEnabled">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.security.twoFactorEnabled ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Minimum Password Length</label>
            <input type="number" class="form-input" [(ngModel)]="settings.security.minPasswordLength" min="6" max="32">
          </div>

          <div class="form-group">
            <label class="form-label">Session Timeout (minutes)</label>
            <input type="number" class="form-input" [(ngModel)]="settings.security.sessionTimeout" min="5" max="480">
          </div>

          <div class="form-group">
            <label class="form-label">Login Attempt Limit</label>
            <input type="number" class="form-input" [(ngModel)]="settings.security.loginAttemptLimit" min="3" max="10">
          </div>

          <div class="form-group">
            <label class="form-label">Require Special Characters</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.security.requireSpecialChars">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.security.requireSpecialChars ? 'Required' : 'Optional' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Enable CAPTCHA</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.security.captchaEnabled">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.security.captchaEnabled ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'profile'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-user"></i>
          Admin Profile Settings
        </h2>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label class="form-label">Avatar</label>
            <div class="avatar-upload-container">
              <div class="avatar-preview" (click)="avatarFileInput.click()">
                <input #avatarFileInput type="file" hidden accept="image/*" (change)="onAvatarUpload($event)">
                <img [src]="settings.profile.avatarUrl || 'assets/default-avatar.png'" alt="Avatar">
                <div class="avatar-overlay">
                  <i class="fas fa-camera"></i>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-input" [(ngModel)]="settings.profile.fullName" placeholder="Enter full name">
          </div>

          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" [(ngModel)]="settings.profile.email" placeholder="admin@example.com">
          </div>

          <div class="form-group full-width">
            <label class="form-label">Change Password</label>
            <button class="secondary-btn" (click)="openPasswordDialog()">
              <i class="fas fa-key"></i>
              Change Password
            </button>
          </div>

          <div class="form-group full-width">
            <label class="form-label">Notification Preferences</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" [(ngModel)]="settings.profile.notifications.email">
                <span class="checkmark"></span>
                Email Notifications
              </label>
              <label class="checkbox-item">
                <input type="checkbox" [(ngModel)]="settings.profile.notifications.push">
                <span class="checkmark"></span>
                Push Notifications
              </label>
              <label class="checkbox-item">
                <input type="checkbox" [(ngModel)]="settings.profile.notifications.sms">
                <span class="checkmark"></span>
                SMS Notifications
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Email Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'email'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-envelope"></i>
          Email Settings
        </h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">SMTP Host</label>
            <input type="text" class="form-input" [(ngModel)]="settings.email.smtpHost" placeholder="smtp.gmail.com">
          </div>

          <div class="form-group">
            <label class="form-label">SMTP Port</label>
            <input type="number" class="form-input" [(ngModel)]="settings.email.smtpPort" placeholder="587">
          </div>

          <div class="form-group">
            <label class="form-label">Sender Email</label>
            <input type="email" class="form-input" [(ngModel)]="settings.email.senderEmail" placeholder="noreply@yourplatform.com">
          </div>

          <div class="form-group">
            <label class="form-label">Sender Name</label>
            <input type="text" class="form-input" [(ngModel)]="settings.email.senderName" placeholder="Your Platform">
          </div>

          <div class="form-group">
            <label class="form-label">Encryption Type</label>
            <select class="form-select" [(ngModel)]="settings.email.encryptionType">
              <option value="none">None</option>
              <option value="ssl">SSL</option>
              <option value="tls">TLS</option>
            </select>
          </div>

          <div class="form-group">
            <button class="secondary-btn" (click)="sendTestEmail()" [disabled]="sendingTest">
              <i class="fas fa-paper-plane" *ngIf="!sendingTest"></i>
              <i class="fas fa-spinner fa-spin" *ngIf="sendingTest"></i>
              {{ sendingTest ? 'Sending...' : 'Send Test Email' }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Notification Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'notifications'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-bell"></i>
          Notification Settings
        </h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">System Email Alerts</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.systemEmailAlerts">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.systemEmailAlerts ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Push Notifications</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.pushNotifications">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.pushNotifications ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Order Notifications</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.orderNotifications">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.orderNotifications ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">User Message Alerts</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.userMessageAlerts">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.userMessageAlerts ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Sound Alerts</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.soundAlerts">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.soundAlerts ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Vibration Alerts</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.notifications.vibrationAlerts">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.notifications.vibrationAlerts ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Maintenance Settings -->
    <div class="tab-panel" *ngIf="activeTab === 'maintenance'">
      <div class="settings-card">
        <h2 class="card-title">
          <i class="fas fa-tools"></i>
          Maintenance Mode
        </h2>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Enable Maintenance Mode</label>
            <div class="toggle-container">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="settings.maintenance.enabled">
                <span class="toggle-slider"></span>
              </label>
              <span class="toggle-label">{{ settings.maintenance.enabled ? 'Enabled' : 'Disabled' }}</span>
            </div>
          </div>

          <div class="form-group full-width">
            <label class="form-label">Maintenance Message</label>
            <textarea 
              class="form-textarea" 
              [(ngModel)]="settings.maintenance.message" 
              placeholder="Enter maintenance message for users..."
              rows="4">
            </textarea>
          </div>

          <div class="form-group">
            <label class="form-label">Scheduled Start</label>
            <input type="datetime-local" class="form-input" [(ngModel)]="settings.maintenance.scheduledStart">
          </div>

          <div class="form-group">
            <label class="form-label">Scheduled End</label>
            <input type="datetime-local" class="form-input" [(ngModel)]="settings.maintenance.scheduledEnd">
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Success Message -->
<div class="success-message" *ngIf="showSuccessMessage" [@slideIn]>
  <i class="fas fa-check-circle"></i>
  Settings saved successfully!
</div>