<div class="wishlist-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="container">
      <h1><i class="fas fa-heart"></i> My Wishlist</h1>
      <p>{{ totalItems }} items saved for later</p>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="toolbar" *ngIf="totalItems > 0">
    <div class="container">
      <div class="toolbar-left">
        <!-- Search -->
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" 
                 [(ngModel)]="searchQuery" 
                 (input)="onSearch()"
                 placeholder="Search wishlist...">
        </div>

        <!-- Filter -->
        <select [(ngModel)]="selectedFilter" (change)="onFilterChange()">
          <option value="all">All Items</option>
          <option value="in-stock">In Stock ({{ inStockCount }})</option>
          <option value="out-of-stock">Out of Stock</option>
        </select>

        <!-- Sort -->
        <select [(ngModel)]="sortBy" (change)="onSortChange()">
          <option value="date-desc">Newest First</option>
          <option value="date-asc">Oldest First</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="name">Name: A-Z</option>
        </select>
      </div>

      <div class="toolbar-right">
        <button class="btn-outline" (click)="addAllToCart()" [disabled]="inStockCount === 0">
          <i class="fas fa-cart-plus"></i> Add All to Cart
        </button>
        <button class="btn-danger" (click)="clearWishlist()">
          <i class="fas fa-trash"></i> Clear All
        </button>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="content">
    <div class="container">
      <!-- Loading State -->
      <div class="loading-state" *ngIf="isLoading">
        <i class="fas fa-spinner fa-spin fa-3x"></i>
        <p>Loading your wishlist...</p>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="!isLoading && totalItems === 0">
        <i class="fas fa-heart-broken fa-4x"></i>
        <h2>Your wishlist is empty</h2>
        <p>Start adding products you love to your wishlist!</p>
        <button class="btn-primary" (click)="goToProducts()">
          <i class="fas fa-shopping-bag"></i> Browse Products
        </button>
      </div>

      <!-- No Results -->
      <div class="no-results" *ngIf="!isLoading && totalItems > 0 && filteredItems.length === 0">
        <i class="fas fa-search fa-3x"></i>
        <h3>No items match your search</h3>
        <p>Try adjusting your filters or search term</p>
      </div>

      <!-- Wishlist Grid -->
      <div class="wishlist-grid" *ngIf="!isLoading && filteredItems.length > 0">
        <div class="wishlist-card" 
             *ngFor="let item of filteredItems; trackBy: trackByItemId"
             (click)="viewProduct(item.id)">
          
          <!-- Stock Badge -->
          <div class="stock-badge" [class.out-of-stock]="!item.inStock">
            {{ item.inStock ? 'In Stock' : 'Out of Stock' }}
          </div>

          <!-- Remove Button -->
          <button class="remove-btn" (click)="removeFromWishlist(item, $event)" title="Remove from wishlist">
            <i class="fas fa-times"></i>
          </button>

          <!-- Product Image -->
          <div class="card-image">
            <img [src]="item.image" [alt]="item.name" loading="lazy">
          </div>

          <!-- Product Info -->
          <div class="card-content">
            <span class="category">{{ item.category }}</span>
            <h3 class="product-name">{{ item.name }}</h3>
            <p class="vendor">by {{ item.vendor }}</p>
            <div class="price">â‚¹{{ item.price | number }}</div>
            <p class="date-added">
              <i class="fas fa-clock"></i> Added {{ item.dateAdded | date:'mediumDate' }}
            </p>
          </div>

          <!-- Actions -->
          <div class="card-actions">
            <button class="btn-cart" 
                    (click)="addToCart(item, $event)" 
                    [disabled]="!item.inStock"
                    [class.disabled]="!item.inStock">
              <i class="fas fa-shopping-cart"></i>
              {{ item.inStock ? 'Add to Cart' : 'Out of Stock' }}
            </button>
            <button class="btn-view" (click)="viewProduct(item.id)">
              <i class="fas fa-eye"></i> View Details
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
