<div class="modal-overlay" (click)="closeDialog()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <h2 class="dialog-title">
        <i class="fas fa-user-shield"></i>
        Update Admin Profile
      </h2>
      <button type="button" class="close-btn" (click)="closeDialog()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
      <form #profileForm="ngForm" class="update-profile-form" (ngSubmit)="submitForm(profileForm)">
        
        <!-- Profile Picture Section -->
        <div class="profile-pic-section">
          <div class="profile-pic-container">
            <img 
              [src]="admin.profilePicUrl || 'https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png'" 
              alt="Profile Picture"
              class="profile-preview"
            />
            <div class="admin-badge">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="upload-overlay">
              <input 
                type="file" 
                id="adminProfilePic" 
                (change)="uploadProfilePic($event)" 
                accept="image/*"
                style="display: none;"
              />
              <label for="adminProfilePic" class="upload-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                  <path d="M3 17l6-6 4 4 8-8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M14 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Change Photo
              </label>
            </div>
          </div>
          <p class="profile-name">{{ admin.fullName || 'Admin Name' }}</p>
          <span class="role-badge">{{ admin.positionAndRole || 'Administrator' }}</span>
        </div>

        <!-- Form Fields Grid -->
        <div class="form-grid">
          
          <!-- Full Name -->
          <div class="form-row">
            <label for="fullName">Full Name <span class="required">*</span></label>
            <input 
              type="text" 
              id="fullName"
              name="fullName"
              [(ngModel)]="admin.fullName" 
              required
              #fullNameField="ngModel"
              placeholder="Enter full name"
              [class.error]="fullNameField.invalid && fullNameField.touched"
            />
            <span class="error-message" *ngIf="fullNameField.invalid && fullNameField.touched">
              Full name is required
            </span>
          </div>

          <!-- Email Address -->
          <div class="form-row">
            <label for="email">Email Address</label>
            <input 
              type="email" 
              id="email"
              name="email"
              [(ngModel)]="admin.email" 
              readonly
              class="readonly-field"
            />
            <span class="field-note">Email cannot be changed</span>
          </div>

          <!-- Mobile Number -->
          <div class="form-row">
            <label for="mobile">Mobile Number <span class="required">*</span></label>
            <input 
              type="tel" 
              id="mobile"
              name="mobile"
              [(ngModel)]="admin.mobile" 
              maxlength="10"
              pattern="[0-9]{10}"
              required
              #mobileField="ngModel"
              placeholder="Enter 10-digit mobile number"
              [class.error]="mobileField.invalid && mobileField.touched"
              (input)="onMobileInput($event)"
            />
            <span class="error-message" *ngIf="mobileField.invalid && mobileField.touched">
              Please enter a valid 10-digit mobile number
            </span>
          </div>

          <!-- Position and Role -->
          <div class="form-row">
            <label for="positionAndRole">Position & Role <span class="required">*</span></label>
            <select 
              id="positionAndRole"
              name="positionAndRole"
              [(ngModel)]="admin.positionAndRole"
              required
              #roleField="ngModel"
              [class.error]="roleField.invalid && roleField.touched"
            >
              <option value="">Select Role</option>
              <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
            </select>
            <span class="error-message" *ngIf="roleField.invalid && roleField.touched">
              Please select a role
            </span>
          </div>

          <!-- Account Status -->
          <div class="form-row full-width">
            <label>Account Status</label>
            <div class="status-toggle">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="admin.active" name="active">
                <span class="slider"></span>
              </label>
              <span class="status-text" [class.active]="admin.active">
                {{ admin.active ? 'Active' : 'Inactive' }}
              </span>
            </div>
          </div>

        </div>

        <!-- Form Footer -->
        <div class="form-footer">
          <button type="button" class="cancel-btn" (click)="closeDialog()">
            Cancel
          </button>
          <button 
            type="submit" 
            class="save-btn"
            [disabled]="profileForm.invalid || isSubmitting"
          >
            <span *ngIf="isSubmitting" class="loading-spinner"></span>
            {{ isSubmitting ? 'Saving...' : 'Save Changes' }}
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
